{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\LearnFi\\\\learnfi\\\\src\\\\context\\\\UserContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { memoryService } from '../services/memoryService';\n\n// Create context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the user context\nexport const useUser = () => {\n  _s();\n  return useContext(UserContext);\n};\n_s(useUser, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const UserProvider = ({\n  children\n}) => {\n  _s2();\n  // User state with default values\n  const [user, setUser] = useState({\n    username: 'User',\n    level: 1,\n    experience: 0,\n    badges: [],\n    completedTopics: [],\n    simulationHistory: [],\n    balance: {\n      DAI: 100,\n      ETH: 0.1,\n      USDC: 100,\n      WBTC: 0.005\n    }\n  });\n\n  // Load user data from localStorage on mount\n  useEffect(() => {\n    try {\n      const savedUser = memoryService.getUserData();\n      if (savedUser) {\n        setUser(savedUser);\n      }\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      // If there's an error, we'll use the default state\n    }\n  }, []);\n\n  // Save user data whenever it changes\n  useEffect(() => {\n    try {\n      memoryService.saveUserData(user);\n    } catch (error) {\n      console.error('Error saving user data:', error);\n    }\n  }, [user]);\n\n  // Add experience points and handle level ups\n  const addExperience = points => {\n    setUser(prevUser => {\n      const newExperience = prevUser.experience + points;\n      const experienceThreshold = prevUser.level * 100; // Simple level up formula\n\n      if (newExperience >= experienceThreshold) {\n        // Level up!\n        return {\n          ...prevUser,\n          level: prevUser.level + 1,\n          experience: newExperience - experienceThreshold\n        };\n      }\n      return {\n        ...prevUser,\n        experience: newExperience\n      };\n    });\n  };\n\n  // Add a badge to the user's collection\n  const addBadge = badge => {\n    setUser(prevUser => {\n      // Check if badge already exists\n      if (prevUser.badges.some(b => b.id === badge.id)) {\n        return prevUser;\n      }\n      return {\n        ...prevUser,\n        badges: [...prevUser.badges, badge]\n      };\n    });\n  };\n\n  // Mark a topic as completed\n  const completeLearnTopic = topicId => {\n    setUser(prevUser => {\n      if (prevUser.completedTopics.includes(topicId)) {\n        return prevUser;\n      }\n      return {\n        ...prevUser,\n        completedTopics: [...prevUser.completedTopics, topicId]\n      };\n    });\n\n    // Add experience for completing a topic\n    addExperience(50);\n  };\n\n  // Record a simulation action\n  const recordSimulation = action => {\n    setUser(prevUser => ({\n      ...prevUser,\n      simulationHistory: [...prevUser.simulationHistory, {\n        ...action,\n        timestamp: new Date().toISOString()\n      }]\n    }));\n\n    // Add experience for performing a simulation\n    addExperience(25);\n  };\n\n  // Update token balance\n  const updateBalance = (token, amount) => {\n    setUser(prevUser => ({\n      ...prevUser,\n      balance: {\n        ...prevUser.balance,\n        [token]: Math.max(0, (prevUser.balance[token] || 0) + amount)\n      }\n    }));\n  };\n\n  // Calculate user progress percentage\n  const calculateProgress = () => {\n    // This is a simplified calculation\n    const totalTopics = 10; // Assuming there are 10 topics total\n    const completedPercentage = user.completedTopics.length / totalTopics * 100;\n    return Math.min(completedPercentage, 100);\n  };\n\n  // Value to be provided by the context\n  const value = {\n    user,\n    setUser,\n    addExperience,\n    addBadge,\n    completeLearnTopic,\n    recordSimulation,\n    updateBalance,\n    calculateProgress\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserProvider, \"YYUc7p87MvWphfhLvbgGxp3xKGI=\");\n_c = UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","memoryService","jsxDEV","_jsxDEV","UserContext","useUser","_s","UserProvider","children","_s2","user","setUser","username","level","experience","badges","completedTopics","simulationHistory","balance","DAI","ETH","USDC","WBTC","savedUser","getUserData","error","console","saveUserData","addExperience","points","prevUser","newExperience","experienceThreshold","addBadge","badge","some","b","id","completeLearnTopic","topicId","includes","recordSimulation","action","timestamp","Date","toISOString","updateBalance","token","amount","Math","max","calculateProgress","totalTopics","completedPercentage","length","min","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/LearnFi/learnfi/src/context/UserContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { memoryService } from '../services/memoryService';\n\n// Create context\nconst UserContext = createContext();\n\n// Custom hook to use the user context\nexport const useUser = () => useContext(UserContext);\n\nexport const UserProvider = ({ children }) => {\n  // User state with default values\n  const [user, setUser] = useState({\n    username: 'User',\n    level: 1,\n    experience: 0,\n    badges: [],\n    completedTopics: [],\n    simulationHistory: [],\n    balance: {\n      DAI: 100,\n      ETH: 0.1,\n      USDC: 100,\n      WBTC: 0.005\n    }\n  });\n\n  // Load user data from localStorage on mount\n  useEffect(() => {\n    try {\n      const savedUser = memoryService.getUserData();\n      if (savedUser) {\n        setUser(savedUser);\n      }\n    } catch (error) {\n      console.error('Error loading user data:', error);\n      // If there's an error, we'll use the default state\n    }\n  }, []);\n\n  // Save user data whenever it changes\n  useEffect(() => {\n    try {\n      memoryService.saveUserData(user);\n    } catch (error) {\n      console.error('Error saving user data:', error);\n    }\n  }, [user]);\n\n  // Add experience points and handle level ups\n  const addExperience = (points) => {\n    setUser(prevUser => {\n      const newExperience = prevUser.experience + points;\n      const experienceThreshold = prevUser.level * 100; // Simple level up formula\n      \n      if (newExperience >= experienceThreshold) {\n        // Level up!\n        return {\n          ...prevUser,\n          level: prevUser.level + 1,\n          experience: newExperience - experienceThreshold\n        };\n      }\n      \n      return {\n        ...prevUser,\n        experience: newExperience\n      };\n    });\n  };\n\n  // Add a badge to the user's collection\n  const addBadge = (badge) => {\n    setUser(prevUser => {\n      // Check if badge already exists\n      if (prevUser.badges.some(b => b.id === badge.id)) {\n        return prevUser;\n      }\n      \n      return {\n        ...prevUser,\n        badges: [...prevUser.badges, badge]\n      };\n    });\n  };\n\n  // Mark a topic as completed\n  const completeLearnTopic = (topicId) => {\n    setUser(prevUser => {\n      if (prevUser.completedTopics.includes(topicId)) {\n        return prevUser;\n      }\n      \n      return {\n        ...prevUser,\n        completedTopics: [...prevUser.completedTopics, topicId],\n      };\n    });\n    \n    // Add experience for completing a topic\n    addExperience(50);\n  };\n\n  // Record a simulation action\n  const recordSimulation = (action) => {\n    setUser(prevUser => ({\n      ...prevUser,\n      simulationHistory: [...prevUser.simulationHistory, {\n        ...action,\n        timestamp: new Date().toISOString()\n      }]\n    }));\n    \n    // Add experience for performing a simulation\n    addExperience(25);\n  };\n\n  // Update token balance\n  const updateBalance = (token, amount) => {\n    setUser(prevUser => ({\n      ...prevUser,\n      balance: {\n        ...prevUser.balance,\n        [token]: Math.max(0, (prevUser.balance[token] || 0) + amount)\n      }\n    }));\n  };\n\n  // Calculate user progress percentage\n  const calculateProgress = () => {\n    // This is a simplified calculation\n    const totalTopics = 10; // Assuming there are 10 topics total\n    const completedPercentage = (user.completedTopics.length / totalTopics) * 100;\n    return Math.min(completedPercentage, 100);\n  };\n\n  // Value to be provided by the context\n  const value = {\n    user,\n    setUser,\n    addExperience,\n    addBadge,\n    completeLearnTopic,\n    recordSimulation,\n    updateBalance,\n    calculateProgress\n  };\n\n  return (\n    <UserContext.Provider value={value}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}