{"ast":null,"code":"import axios from 'axios';\nimport config from '../config';\n\n// Base URL and headers for Tavily API\nconst tavilyApi = axios.create({\n  baseURL: config.tavilyApiUrl,\n  headers: {\n    'X-API-Key': config.tavilyApiKey,\n    'Content-Type': 'application/json'\n  }\n});\n\n// Get DeFi trivia or fun fact\nconst getTrivia = async (topic = 'Compound Protocol') => {\n  try {\n    // If no API key is available, use the fallback\n    if (!config.tavilyApiKey) {\n      return getFallbackTrivia(topic);\n    }\n    const response = await tavilyApi.post('/search', {\n      query: `Interesting fact or trivia about ${topic} in DeFi`,\n      search_depth: 'advanced',\n      include_answer: true,\n      max_results: 3\n    });\n    if (response.data.answer) {\n      var _response$data$result, _response$data$result2;\n      return {\n        fact: response.data.answer,\n        source: ((_response$data$result = response.data.results) === null || _response$data$result === void 0 ? void 0 : (_response$data$result2 = _response$data$result[0]) === null || _response$data$result2 === void 0 ? void 0 : _response$data$result2.url) || 'Tavily API'\n      };\n    } else {\n      throw new Error('No answer found in Tavily response');\n    }\n  } catch (error) {\n    console.error('Error fetching trivia from Tavily:', error);\n    return getFallbackTrivia(topic);\n  }\n};\n\n// Get DeFi news\nconst getNews = async (topic = 'Compound Protocol') => {\n  try {\n    // If no API key is available, use the fallback\n    if (!config.tavilyApiKey) {\n      return getFallbackNews();\n    }\n    const response = await tavilyApi.post('/search', {\n      query: `Latest news about ${topic} in DeFi`,\n      search_depth: 'advanced',\n      include_answer: false,\n      max_results: 5\n    });\n    if (response.data.results && response.data.results.length > 0) {\n      return response.data.results.map(result => ({\n        title: result.title,\n        snippet: result.content,\n        url: result.url,\n        date: result.published_date || 'Recent'\n      }));\n    } else {\n      throw new Error('No results found in Tavily response');\n    }\n  } catch (error) {\n    console.error('Error fetching news from Tavily:', error);\n    return getFallbackNews();\n  }\n};\n\n// Fallback trivia when API is unavailable\nconst getFallbackTrivia = topic => {\n  const triviaList = [{\n    fact: \"Compound was one of the first DeFi protocols to introduce the concept of 'governance tokens' with COMP, allowing token holders to vote on protocol changes.\",\n    source: \"DeFi Education\"\n  }, {\n    fact: \"The total value locked (TVL) in Compound has exceeded billions of dollars, making it one of the largest lending protocols in DeFi.\",\n    source: \"DeFi Education\"\n  }, {\n    fact: \"Compound uses an algorithmic interest rate model that adjusts based on supply and demand for each asset.\",\n    source: \"DeFi Education\"\n  }, {\n    fact: \"cTokens in Compound automatically earn interest through their exchange rate, which increases over time relative to the underlying asset.\",\n    source: \"DeFi Education\"\n  }, {\n    fact: \"Compound was founded by Robert Leshner and Geoffrey Hayes in 2017, but the protocol wasn't launched until 2018.\",\n    source: \"DeFi Education\"\n  }];\n\n  // Return a random trivia fact\n  return triviaList[Math.floor(Math.random() * triviaList.length)];\n};\n\n// Fallback news when API is unavailable\nconst getFallbackNews = () => {\n  return [{\n    title: \"Compound Releases New Governance Proposal\",\n    snippet: \"The Compound community is voting on a new proposal to adjust interest rate models for several assets.\",\n    url: \"#\",\n    date: \"Recent\"\n  }, {\n    title: \"DeFi Market Analysis: Lending Protocols Lead Growth\",\n    snippet: \"Compound and other lending protocols show strong growth in total value locked despite market volatility.\",\n    url: \"#\",\n    date: \"Recent\"\n  }, {\n    title: \"Educational Resources for DeFi Users Expanding\",\n    snippet: \"New educational platforms are making it easier for beginners to understand DeFi protocols like Compound.\",\n    url: \"#\",\n    date: \"Recent\"\n  }];\n};\nconst tavilyService = {\n  getTrivia,\n  getNews\n};\nexport { tavilyService };","map":{"version":3,"names":["axios","config","tavilyApi","create","baseURL","tavilyApiUrl","headers","tavilyApiKey","getTrivia","topic","getFallbackTrivia","response","post","query","search_depth","include_answer","max_results","data","answer","_response$data$result","_response$data$result2","fact","source","results","url","Error","error","console","getNews","getFallbackNews","length","map","result","title","snippet","content","date","published_date","triviaList","Math","floor","random","tavilyService"],"sources":["C:/Users/User/Documents/GitHub/LearnFi/learnfi/src/services/tavilyService.js"],"sourcesContent":["import axios from 'axios';\nimport config from '../config';\n\n// Base URL and headers for Tavily API\nconst tavilyApi = axios.create({\n  baseURL: config.tavilyApiUrl,\n  headers: {\n    'X-API-Key': config.tavilyApiKey,\n    'Content-Type': 'application/json'\n  }\n});\n\n// Get DeFi trivia or fun fact\nconst getTrivia = async (topic = 'Compound Protocol') => {\n  try {\n    // If no API key is available, use the fallback\n    if (!config.tavilyApiKey) {\n      return getFallbackTrivia(topic);\n    }\n\n    const response = await tavilyApi.post('/search', {\n      query: `Interesting fact or trivia about ${topic} in DeFi`,\n      search_depth: 'advanced',\n      include_answer: true,\n      max_results: 3\n    });\n\n    if (response.data.answer) {\n      return {\n        fact: response.data.answer,\n        source: response.data.results?.[0]?.url || 'Tavily API'\n      };\n    } else {\n      throw new Error('No answer found in Tavily response');\n    }\n  } catch (error) {\n    console.error('Error fetching trivia from Tavily:', error);\n    return getFallbackTrivia(topic);\n  }\n};\n\n// Get DeFi news\nconst getNews = async (topic = 'Compound Protocol') => {\n  try {\n    // If no API key is available, use the fallback\n    if (!config.tavilyApiKey) {\n      return getFallbackNews();\n    }\n\n    const response = await tavilyApi.post('/search', {\n      query: `Latest news about ${topic} in DeFi`,\n      search_depth: 'advanced',\n      include_answer: false,\n      max_results: 5\n    });\n\n    if (response.data.results && response.data.results.length > 0) {\n      return response.data.results.map(result => ({\n        title: result.title,\n        snippet: result.content,\n        url: result.url,\n        date: result.published_date || 'Recent'\n      }));\n    } else {\n      throw new Error('No results found in Tavily response');\n    }\n  } catch (error) {\n    console.error('Error fetching news from Tavily:', error);\n    return getFallbackNews();\n  }\n};\n\n// Fallback trivia when API is unavailable\nconst getFallbackTrivia = (topic) => {\n  const triviaList = [\n    {\n      fact: \"Compound was one of the first DeFi protocols to introduce the concept of 'governance tokens' with COMP, allowing token holders to vote on protocol changes.\",\n      source: \"DeFi Education\"\n    },\n    {\n      fact: \"The total value locked (TVL) in Compound has exceeded billions of dollars, making it one of the largest lending protocols in DeFi.\",\n      source: \"DeFi Education\"\n    },\n    {\n      fact: \"Compound uses an algorithmic interest rate model that adjusts based on supply and demand for each asset.\",\n      source: \"DeFi Education\"\n    },\n    {\n      fact: \"cTokens in Compound automatically earn interest through their exchange rate, which increases over time relative to the underlying asset.\",\n      source: \"DeFi Education\"\n    },\n    {\n      fact: \"Compound was founded by Robert Leshner and Geoffrey Hayes in 2017, but the protocol wasn't launched until 2018.\",\n      source: \"DeFi Education\"\n    }\n  ];\n  \n  // Return a random trivia fact\n  return triviaList[Math.floor(Math.random() * triviaList.length)];\n};\n\n// Fallback news when API is unavailable\nconst getFallbackNews = () => {\n  return [\n    {\n      title: \"Compound Releases New Governance Proposal\",\n      snippet: \"The Compound community is voting on a new proposal to adjust interest rate models for several assets.\",\n      url: \"#\",\n      date: \"Recent\"\n    },\n    {\n      title: \"DeFi Market Analysis: Lending Protocols Lead Growth\",\n      snippet: \"Compound and other lending protocols show strong growth in total value locked despite market volatility.\",\n      url: \"#\",\n      date: \"Recent\"\n    },\n    {\n      title: \"Educational Resources for DeFi Users Expanding\",\n      snippet: \"New educational platforms are making it easier for beginners to understand DeFi protocols like Compound.\",\n      url: \"#\",\n      date: \"Recent\"\n    }\n  ];\n};\n\nconst tavilyService = {\n  getTrivia,\n  getNews\n};\n\nexport { tavilyService };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}