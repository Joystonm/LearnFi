{"ast":null,"code":"\"use strict\";\n\n/**\n * @file Utility\n * @desc These methods are helpers for the Compound class.\n */\nexports.__esModule = true;\nexports.getNetNameWithChainId = exports.getAbi = exports.getAddress = exports.request = void 0;\nvar constants_1 = require(\"./constants\");\n/* eslint-disable */\nvar _request;\nvar http;\nvar https;\nfunction _nodeJsRequest(options) {\n  return new Promise(function (resolve, reject) {\n    var url = options.url || options.hostname;\n    // Use 'https' if the protocol is not specified in 'options.hostname'\n    if (url.indexOf(\"http://\") !== 0 && url.indexOf(\"https://\") !== 0) {\n      url = \"https://\" + url;\n    }\n    // Choose the right module based on the protocol in 'options.hostname'\n    var httpOrHttps = url.indexOf(\"http://\") === 0 ? http : https;\n    // Remove the 'http://' so the native node.js module will understand\n    options.hostname = url.split('://')[1];\n    var body = '';\n    var req = httpOrHttps.request(options, function (res) {\n      res.on(\"data\", function (bodyBuffer) {\n        body += bodyBuffer.toString();\n      });\n      res.on(\"end\", function () {\n        resolve({\n          status: res.statusCode,\n          statusText: res.statusMessage,\n          body: body\n        });\n      });\n    });\n    req.on('timeout', function () {\n      req.abort();\n      return reject({\n        status: 408,\n        statusText: 'Client HTTP request timeout limit reached.'\n      });\n    });\n    req.on('error', function (err) {\n      if (req.aborted) return;\n      if (err !== null && err.toString() === '[object Object]') {\n        console.error(JSON.stringify(err));\n      } else {\n        console.error(err);\n      }\n      return reject();\n    });\n    if (options.body) {\n      req.write(JSON.stringify(options.body));\n    }\n    req.end();\n  });\n}\nfunction _webBrowserRequest(options) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    var contentTypeIsSet = false;\n    options = options || {};\n    var method = options.method || \"GET\";\n    var url = options.url || options.hostname;\n    url += typeof options.path === \"string\" ? options.path : \"\";\n    if (typeof url !== \"string\") {\n      return reject(\"HTTP Request: Invalid URL.\");\n    }\n    // Use 'https' if the protocol is not specified in 'options.hostname'\n    if (url.indexOf(\"http://\") !== 0 && url.indexOf(\"https://\") !== 0) {\n      url = \"https://\" + url;\n    }\n    xhr.open(method, url);\n    for (var header in options.headers) {\n      if ({}.hasOwnProperty.call(options.headers, header)) {\n        var lcHeader = header.toLowerCase();\n        contentTypeIsSet = lcHeader === \"content-type\" ? true : contentTypeIsSet;\n        xhr.setRequestHeader(header, options.headers[header]);\n      }\n    }\n    if (!contentTypeIsSet) {\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    }\n    xhr.onload = function () {\n      var body;\n      if (xhr.status >= 100 && xhr.status < 400) {\n        try {\n          JSON.parse(xhr.response);\n          body = xhr.response;\n        } catch (e) {\n          body = xhr.statusText;\n        }\n        return resolve({\n          status: xhr.status,\n          statusText: xhr.statusText,\n          body: body\n        });\n      } else {\n        return reject({\n          status: xhr.status,\n          statusText: xhr.statusText\n        });\n      }\n    };\n    if (method !== \"GET\") {\n      xhr.send(JSON.stringify(options.body));\n    } else {\n      xhr.send();\n    }\n  });\n}\ntry {\n  window;\n  _request = _webBrowserRequest;\n} catch (e) {\n  http = require('http');\n  https = require('https');\n  _request = _nodeJsRequest;\n}\n/**\n * A generic HTTP request method that works in Node.js and the Web Browser.\n *\n * @param {object} options HTTP request options. See Node.js http.request\n *     documentation for details.\n *\n * @hidden\n *\n * @returns {Promise<object>} Returns a promise and eventually an HTTP response\n *     (JavaScript object).\n */\nfunction request(options) {\n  return _request.apply(null, [options]);\n}\nexports.request = request;\n/* eslint-enable */\n/**\n * Gets the contract address of the named contract. This method supports\n *     contracts used by the Compound Protocol.\n *\n * @param {string} contract The name of the contract.\n * @param {string} [network] Optional name of the Ethereum network. Main net and\n *     all the popular public test nets are supported.\n *\n * @returns {string} Returns the address of the contract.\n *\n * @example\n * ```\n * console.log('cETH Address: ', Compound.util.getAddress(Compound.cETH));\n * ```\n */\nfunction getAddress(contract, network) {\n  if (network === void 0) {\n    network = 'mainnet';\n  }\n  return constants_1.address[network][contract];\n}\nexports.getAddress = getAddress;\n/**\n * Gets a contract ABI as a JavaScript array. This method supports\n *     contracts used by the Compound Protocol.\n *\n * @param {string} contract The name of the contract.\n *\n * @returns {Array} Returns the ABI of the contract as a JavaScript array.\n *\n * @example\n * ```\n * console.log('cETH ABI: ', Compound.util.getAbi('cEther'));\n * ```\n */\nfunction getAbi(contract) {\n  return constants_1.abi[contract];\n}\nexports.getAbi = getAbi;\n/**\n * Gets the name of an Ethereum network based on its chain ID.\n *\n * @param {string} chainId The chain ID of the network.\n *\n * @returns {string} Returns the name of the Ethereum network.\n *\n * @example\n * ```\n * console.log('Goerli : ', Compound.util.getNetNameWithChainId(5));\n * ```\n */\nfunction getNetNameWithChainId(chainId) {\n  var networks = {\n    1: 'mainnet',\n    3: 'ropsten',\n    4: 'rinkeby',\n    5: 'goerli',\n    42: 'kovan',\n    43113: 'fuji',\n    43114: 'ava-mainnet'\n  };\n  return networks[chainId];\n}\nexports.getNetNameWithChainId = getNetNameWithChainId;","map":{"version":3,"names":["constants_1","require","_request","http","https","_nodeJsRequest","options","Promise","resolve","reject","url","hostname","indexOf","httpOrHttps","split","body","req","request","res","on","bodyBuffer","toString","status","statusCode","statusText","statusMessage","abort","err","aborted","console","error","JSON","stringify","write","end","_webBrowserRequest","xhr","XMLHttpRequest","contentTypeIsSet","method","path","open","header","headers","hasOwnProperty","call","lcHeader","toLowerCase","setRequestHeader","onload","parse","response","e","send","window","apply","exports","getAddress","contract","network","address","getAbi","abi","getNetNameWithChainId","chainId","networks"],"sources":["../../src/util.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}